{{ define "admin" }}

<!DOCTYPE html>
<html>
<head>
	<title>MESA</title>
	<link rel="stylesheet" type="text/css" href="admin.css">
	<link rel="icon" href="https://cwp.io/meteor-icon.png">
</head>
<body>
	<div id="content">
		<!-- Processed data -->
		<span id="proc"></span> 
		
		<div id="log">
		</div>
	</div>
	<script>
		socket = new WebSocket("wss://mesa.cwp.io/adminws/");
		socket.onmessage = function (event) {
			d = JSON.parse(event.data);
			if (d.type == 0) {
				d.msg.forEach((m) => {
					span = document.createElement("span");
					text = document.createTextNode(m);
					span.appendChild(text);
					span.class = "log";
					document.getElementById("log").appendChild(span);
				});
			} else {
				document.getElementById("proc").innerHTML = "Processed " + d.msg[0] + "/" + d.msg[1] + " images";
			}
		};
	</script>
</body>
</html>

{{ end }}